@inherits LayoutComponentBase
@namespace MySuperShop.BlazorFrontend.Layout
@inject IJSRuntime JsRuntime

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 d-none d-md-block bg-light sidebar" style="min-height: 100vh;">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <NavLink class="nav-link" href="">
                            <span data-feather="home"></span>
                            Home
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="registration">
                            <span data-feather="file"></span>
                            Registration
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="nav-link" href="authentication">
                            <span data-feather="file"></span>
                            Authentication
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="@{Disabled}" href="products">
                            <span data-feather="file"></span>
                            Products
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="@{Disabled}" href="add_product">
                            <span data-feather="file"></span>
                            Add product
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="@{Disabled}" href="delete_product">
                            <span data-feather="file"></span>
                            Delete product
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="@{Disabled}" href="update_product">
                            <span data-feather="file"></span>
                            Update product
                        </NavLink>
                    </li>
                    <li class="nav-item">
                        <NavLink class="@{Disabled}" href="traffic">
                            <span data-feather="file"></span>
                            Traffic info
                        </NavLink>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main content -->
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            <div class="pt-3">
                @Body
            </div>
        </main>
    </div>
</div>

@code
{
    public bool IsAuthenticate { get; set; } = false;
    private string Disabled => IsAuthenticate == false ? "nav-link disabled" : "nav-link";
    
    protected override async Task OnInitializedAsync()
    {
        var token = await JsRuntime.InvokeAsync<string>("localStorage.getItem", "jwt");
        IsAuthenticate = !string.IsNullOrWhiteSpace(token);
    }
}